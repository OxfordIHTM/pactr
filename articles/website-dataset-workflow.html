<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Website dataset workflow • pactr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Website dataset workflow">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">pactr</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Unreleased version">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/pactr.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/figshare-workflow.html">Figshare workflow</a></li>
    <li><a class="dropdown-item" href="../articles/website-dataset-workflow.html">Website dataset workflow</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="http://twitter.com/OxIHTM" aria-label="Twitter"><span class="fa fab fa-twitter fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://www.facebook.com/MSc-in-International-Health-and-Tropical-Medicine-University-of-Oxford-433056700228246/" aria-label="Facebook"><span class="fa fab fa-facebook fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://www.linkedin.com/company/international-health-and-tropical-medicine" aria-label="LinkedIn"><span class="fa fab fa-linkedin fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/OxfordIHTM/pactr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Website dataset workflow</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/OxfordIHTM/pactr/blob/main/vignettes/website-dataset-workflow.Rmd" class="external-link"><code>vignettes/website-dataset-workflow.Rmd</code></a></small>
      <div class="d-none name"><code>website-dataset-workflow.Rmd</code></div>
    </div>

    
    
<p>The Pandemic PACT data is publicly available for download from its <a href="https://www.pandemicpact.org/" class="external-link">website</a>. <a href="https://github.com/OxfordIHTM/pactr" class="external-link">pactr</a>
provides an application programming interface (API) to the research
programme’s dataset available from its website data download facility
allowing for programmatic access to its publicly available funder
tracker dataset.</p>
<div class="section level2">
<h2 id="website-data-interface">Website data interface<a class="anchor" aria-label="anchor" href="#website-data-interface"></a>
</h2>
<p>The functions for interfacing with the data available from the
Pandemic PACT website allow for <em>downloading</em>, <em>reading</em>,
and <em>processing</em>. Current website data-specific functionalities
available in <a href="https://github.com/OxfordIHTM/pactr" class="external-link">pactr</a> are:</p>
<ol style="list-style-type: decimal">
<li><p>Downloading of Pandemic PACT dataset available from the website
(<em>stable</em>);</p></li>
<li><p>Reading of Pandemic PACT dataset available from the website
(<em>stable</em>); and,</p></li>
<li><p>Processing of Pandemic PACT dataset available from the website
(<em>experimental</em>).</p></li>
</ol>
</div>
<div class="section level2">
<h2 id="website-data-workflow">Website data workflow<a class="anchor" aria-label="anchor" href="#website-data-workflow"></a>
</h2>
<pre><code><span><span class="co">#&gt; Warning in readLines("website.mmd"): incomplete final line found on</span></span>
<span><span class="co">#&gt; 'website.mmd'</span></span>
<span><span class="co">#&gt; Error in loadNamespace(name): there is no package called 'webshot'</span></span></code></pre>
<div class="section level3">
<h3 id="download-data-available-from-website">Download data available from website<a class="anchor" aria-label="anchor" href="#download-data-available-from-website"></a>
</h3>
<p>To download the Pandemic PACT tracker dataset available from its
website, the following command can be used:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Save the dataset from website to a temporary directory ----</span></span>
<span><span class="fu"><a href="../reference/pact_download.html">pact_download_website</a></span><span class="op">(</span>path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>which will return the path to the downloaded dataset:</p>
<pre><code><span><span class="co">#&gt; [1] "/tmp/RtmpjUmn8P/pandemic-pact-grants.csv"</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="read-the-pandemic-pact-tracker-dataset-from-the-website">Read the Pandemic PACT tracker dataset from the website<a class="anchor" aria-label="anchor" href="#read-the-pandemic-pact-tracker-dataset-from-the-website"></a>
</h3>
<p>Instead of downloading, the Pandemic PACT dataset available from its
website can be read into R directly as follows:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/pact_read_website.html">pact_read_website</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>which results in the following:</p>
<pre><code><span><span class="co">#&gt; # A tibble: 9,862 × 39</span></span>
<span><span class="co">#&gt;    GrantID PubMedGrantId GrantTitleEng Abstract PublicationYearOfAward</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;   &lt;list&gt;        &lt;chr&gt;         &lt;chr&gt;                     &lt;int&gt;</span></span>
<span><span class="co">#&gt;  1 C00037  &lt;chr [1]&gt;     COVID-19: Im… "The cl…                   2020</span></span>
<span><span class="co">#&gt;  2 C00038  &lt;chr [3]&gt;     Identificati… "The ou…                   2020</span></span>
<span><span class="co">#&gt;  3 C00040  &lt;chr [2]&gt;     Development … "This r…                   2020</span></span>
<span><span class="co">#&gt;  4 C00041  &lt;chr [1]&gt;     Rapid, Low-c… "The ou…                   2020</span></span>
<span><span class="co">#&gt;  5 C00043  &lt;chr [1]&gt;     Rapid Resear… "In 201…                   2020</span></span>
<span><span class="co">#&gt;  6 C00045  &lt;chr [1]&gt;     Development … "Corona…                   2020</span></span>
<span><span class="co">#&gt;  7 C00046  &lt;chr [2]&gt;     Rapid develo… "The ou…                   2020</span></span>
<span><span class="co">#&gt;  8 C00047  &lt;chr [1]&gt;     Preventing S… "The SA…                   2020</span></span>
<span><span class="co">#&gt;  9 C00048  &lt;chr [1]&gt;     Understandin… "A new …                   2020</span></span>
<span><span class="co">#&gt; 10 C00049  &lt;chr [2]&gt;     RIsk of envi… "This s…                   2020</span></span>
<span><span class="co">#&gt; # ℹ 9,852 more rows</span></span>
<span><span class="co">#&gt; # ℹ 34 more variables: GrantEndYear &lt;int&gt;,</span></span>
<span><span class="co">#&gt; #   ResearchInstitutionName &lt;chr&gt;, GrantAmountConverted &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   StudySubject &lt;list&gt;, Ethnicity &lt;list&gt;, AgeGroups &lt;list&gt;,</span></span>
<span><span class="co">#&gt; #   Rurality &lt;list&gt;, VulnerablePopulations &lt;list&gt;,</span></span>
<span><span class="co">#&gt; #   OccupationalGroups &lt;list&gt;, StudyType &lt;list&gt;,</span></span>
<span><span class="co">#&gt; #   ClinicalTrial &lt;list&gt;, Pathogen &lt;list&gt;, InfluenzaA &lt;chr&gt;, …</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="process-the-pandemic-pact-tracker-dataset-from-the-website">Process the Pandemic PACT tracker dataset from the website<a class="anchor" aria-label="anchor" href="#process-the-pandemic-pact-tracker-dataset-from-the-website"></a>
</h3>
<p>The package includes functions that will process the Pandemic PACT
tracker dataset into specific structures and aggregations that will
allow for further plotting and reporting of similar outputs that are
currently presented in the Pandemic PACT website.</p>
<p>For example, the following will process the Pandemic PACT tracker
dataset into an aggregated dataset structure that can be used to create
a similar plot to the one presented in the <a href="https://www.pandemicpact.org/visualise#disease" class="external-link">website</a>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/pact_read_website.html">pact_read_website</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/pact_process_website.html">pact_process_website_topic_group</a></span><span class="op">(</span>topic <span class="op">=</span> <span class="st">"Disease"</span>, group <span class="op">=</span> <span class="st">"GrantStartYear"</span><span class="op">)</span></span></code></pre></div>
<p>which produces the following output:</p>
<pre><code><span><span class="co">#&gt; # A tibble: 170 × 3</span></span>
<span><span class="co">#&gt;    GrantStartYear Disease                                      n</span></span>
<span><span class="co">#&gt;             &lt;int&gt; &lt;chr&gt;                                    &lt;int&gt;</span></span>
<span><span class="co">#&gt;  1           1978 Pandemic-prone influenza                     1</span></span>
<span><span class="co">#&gt;  2           1978 Severe Acute Respiratory Syndrome (SARS)     1</span></span>
<span><span class="co">#&gt;  3           1981 COVID-19                                     1</span></span>
<span><span class="co">#&gt;  4           1982 COVID-19                                     1</span></span>
<span><span class="co">#&gt;  5           1988 COVID-19                                     1</span></span>
<span><span class="co">#&gt;  6           1992 COVID-19                                     6</span></span>
<span><span class="co">#&gt;  7           1994 COVID-19                                     2</span></span>
<span><span class="co">#&gt;  8           1996 COVID-19                                     1</span></span>
<span><span class="co">#&gt;  9           1997 COVID-19                                    28</span></span>
<span><span class="co">#&gt; 10           1997 Zika virus disease                           1</span></span>
<span><span class="co">#&gt; # ℹ 160 more rows</span></span></code></pre>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ernest Guevarra.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
